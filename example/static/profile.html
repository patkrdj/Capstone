<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>블루레이 추천 - 프로필</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', Arial, sans-serif; margin: 0; padding: 0 16px; color: #222; }
    header, footer { padding: 16px 0; }
    header { border-bottom: 1px solid #e5e5e5; }
    footer { border-top: 1px solid #e5e5e5; margin-top: 40px; padding-top: 24px; color: #666; }
    nav a { margin-right: 12px; color: #0366d6; text-decoration: none; }
    nav a:hover { text-decoration: underline; }
    .section { margin: 24px 0; }
    .row { display: flex; gap: 16px; align-items: center; }
    .avatar { width: 80px; height: 80px; border-radius: 50%; border: 1px dashed #bbb; background: #fafafa; }
    .button { padding: 10px 14px; border: 1px solid #ddd; background: #fff; border-radius: 6px; cursor: pointer; }
    .grid { display: grid; gap: 12px; grid-template-columns: repeat(5, 1fr); }
    .card { border: 1px dashed #bbb; border-radius: 8px; background: #fafafa; height: 140px; display: flex; align-items: center; justify-content: center; color: #888; }
    .panel { border: 1px dashed #bbb; border-radius: 8px; background: #fafafa; padding: 12px; color: #666; }
  </style>
  <!-- 프로필 화면 와이어프레임 -->
  <!-- 사용자 정보, 찜 목록, 시청기록/구매내역, 설정 -->
</head>
<body>
  <header>
    <nav>
      <strong>BLURAY</strong>
      <a href="/static/home.html">홈</a>
      <a href="/static/search.html">검색</a>
      <a href="/static/login.html">로그인</a>
      <a href="/static/profile.html">프로필</a>
    </nav>
  </header>

  <main>
    <section class="section">
      <div class="row">
        <div class="avatar"></div>
        <div>
          <h1 id="display-name">사용자 이름</h1>
          <div id="display-userid" style="color:#888; font-size:14px; margin-top:4px;"></div>
          <div id="display-email" style="color:#666;"></div>
          <div style="margin-top:8px;">
            <button class="button">프로필 수정</button>
            <button class="button">로그아웃</button>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>찜한 타이틀</h2>
      <div class="grid">
        <div class="card">카드</div>
        <div class="card">카드</div>
        <div class="card">카드</div>
        <div class="card">카드</div>
        <div class="card">카드</div>
      </div>
    </section>

    <section class="section">
      <h2>최근 본/구매한 타이틀</h2>
      <div class="panel">목록/타임라인 영역</div>
    </section>

    <section class="section">
      <h2>설정</h2>
      <div class="panel">알림, 추천 선호도, 개인정보 설정</div>
    </section>
  </main>

  <footer>
    <div>© 2025 Blu-ray Recommender</div>
  </footer>
  <script>
    (async function () {
      const token = localStorage.getItem('accessToken');
      if (!token) {
        window.location.href = '/static/login.html';
        return;
      }
      try {
        const res = await fetch('/api/me', { headers: { Authorization: `Bearer ${token}` } });
        if (!res.ok) {
          window.location.href = '/static/login.html';
          return;
        }
        const data = await res.json();
        const nameEl = document.getElementById('display-name');
        const useridEl = document.getElementById('display-userid');
        const emailEl = document.getElementById('display-email');
        nameEl.textContent = data.username || data.usernameOrEmail || '사용자';
        useridEl.textContent = data.userId ? `User ID: ${data.userId}` : '';
        emailEl.textContent = data.email || '';
      } catch (e) {
        window.location.href = '/static/login.html';
      }
    })();
  </script>
</body>
</html>

